{"ast":null,"code":"import _slicedToArray from\"D:/PROJECTS/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import useInterval from'../hooks/useInterval.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AlarmHead(props){var date=new Date();var hour=date.getHours();var minute=date.getMinutes();var second=date.getSeconds();var day=date.getDate();var month=date.getMonth();var year=date.getFullYear();var _useState=useState(hour),_useState2=_slicedToArray(_useState,2),now_hour=_useState2[0],setHour=_useState2[1];var _useState3=useState(minute),_useState4=_slicedToArray(_useState3,2),now_min=_useState4[0],setMinute=_useState4[1];var _useState5=useState(second),_useState6=_slicedToArray(_useState5,2),now_second=_useState6[0],setSecond=_useState6[1];var _useState7=useState(day),_useState8=_slicedToArray(_useState7,2),now_day=_useState8[0],setDay=_useState8[1];var _useState9=useState(month+1),_useState10=_slicedToArray(_useState9,2),now_month=_useState10[0],setMonth=_useState10[1];var _useState11=useState(year),_useState12=_slicedToArray(_useState11,2),now_year=_useState12[0],setYear=_useState12[1];var ringHour=props.ringHour===undefined?props.ringHour:Number(props.ringHour);var ringMin=props.ringMin===undefined?props.ringMin:Number(props.ringMin);var ringMemo=props.ringMemo;var ringId=props.ringId;var ringOver=props.ringOver;var chkTimeHour=null;var chkTimeMin=null;var content=null;//타임 체크\nif(ringHour===undefined&&ringMin===undefined){content=/*#__PURE__*/_jsx(\"h3\",{className:\"empty kr\",children:\"\\uC6B8\\uB9B4 \\uC54C\\uB78C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4! \\uC54C\\uB78C\\uC744 \\uC124\\uC815\\uD574 \\uC8FC\\uC138\\uC694.\"});}else if(now_min>ringMin){// chkTimeHour = now_hour === 0 ? ringHour - (now_hour + 1) : ringHour - now_hour;\nchkTimeHour=ringHour-(now_hour+1);chkTimeMin=60+ringMin-now_min;content=/*#__PURE__*/_jsxs(\"h3\",{className:\"kr\",children:[/*#__PURE__*/_jsx(\"strong\",{children:chkTimeHour}),\"\\uC2DC\\uAC04 \",/*#__PURE__*/_jsx(\"strong\",{children:chkTimeMin}),\"\\uBD84 \\uD6C4\\uC5D0 \",/*#__PURE__*/_jsx(\"strong\",{children:ringMemo}),\" \\uC54C\\uB78C\\uC774 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"]});}else if(now_min<ringMin){chkTimeHour=ringHour-now_hour;chkTimeMin=ringMin-now_min;content=/*#__PURE__*/_jsxs(\"h3\",{className:\"kr\",children:[/*#__PURE__*/_jsx(\"strong\",{children:chkTimeHour}),\"\\uC2DC\\uAC04 \",/*#__PURE__*/_jsx(\"strong\",{children:chkTimeMin}),\"\\uBD84 \\uD6C4\\uC5D0 \",/*#__PURE__*/_jsx(\"strong\",{children:ringMemo}),\" \\uC54C\\uB78C\\uC774 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"]});}else if(ringHour>now_hour&&now_min===ringMin){chkTimeHour=ringHour-now_hour;chkTimeMin=0;content=/*#__PURE__*/_jsxs(\"h3\",{className:\"kr\",children:[/*#__PURE__*/_jsx(\"strong\",{children:chkTimeHour}),\"\\uC2DC\\uAC04 \",/*#__PURE__*/_jsx(\"strong\",{children:chkTimeMin}),\"\\uBD84 \\uD6C4\\uC5D0 \",/*#__PURE__*/_jsx(\"strong\",{children:ringMemo}),\" \\uC54C\\uB78C\\uC774 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"]});}else if(ringOver===false&&ringHour===now_hour&&ringMin===now_min&&now_second===0){match();}else{content=/*#__PURE__*/_jsx(\"h3\",{className:\"empty kr\",children:\"\\uC6B8\\uB9B4 \\uC54C\\uB78C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4! \\uC54C\\uB78C\\uC744 \\uC124\\uC815\\uD574 \\uC8FC\\uC138\\uC694.\"});}// setSwc(props.ringOver);\n// } else if ((Number(ringHour) - now_hour) <= 1) { //설정한 시간과 현재시간이 같으면\n//     chkTimeHour = 0;\n//     chkTimeMin = Number(ringMin) - now_min;\n//     content = `다음 알람 : ${chkTimeHour}시간 ${chkTimeMin}분 후에 ${ringMemo}알람이 실행됩니다.`;\n// } else if ((Number(ringHour) - now_hour >= 1)) {\n//     chkTimeHour = Number(ringHour) - now_hour;\n//     // chkTimeMin = Number(ringMin) > now_min ? Number(ringMin) - now_min : now_min - Number(ringMin);\n//     chkTimeMin = Number(ringMin) > now_min ? Number(ringMin) - now_min : 60 - now_min - Number(ringMin);\n//     content = `다음 알람 : ${chkTimeHour}시간 ${chkTimeMin}분 후에 ${ringMemo}알람이 실행됩니다.`;\nfunction match(){fetch(\"http://localhost:3001/alarm/\".concat(ringId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({over:true})}).then(function(res){if(res.ok){window.alert(\"알람 발생!\");}})// .then((res) => { if (res.ok) { console.log(\"알람 발생! 모달로 대체? useEffect로 화면밖에서도?\"); } })\n.catch(function(){window.alert(\"네트워크 오류가 발생했습니다. 확인 후 다시 시도해주십시오.\");});// fetch(`http://localhost:3001/alarm?hour=${ringHour}&min=${ringMin}`, {\n//     method: \"PUT\",\n// }).then((res) => { console.log(\"알람\", res, ringMemo); })\n}useInterval(function(){var date=new Date();var hour=date.getHours();var minute=date.getMinutes();var second=date.getSeconds();var day=date.getDate();var month=date.getMonth();var year=date.getFullYear();setHour(hour);setMinute(minute);setSecond(second);setDay(day);setMonth(month+1);setYear(year);},1000);return/*#__PURE__*/_jsxs(\"section\",{id:\"alarmHead\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ALARM\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"kr\",children:[now_year,\". \",now_month,\". \",now_day,\" \",now_hour<10?\"0\".concat(now_hour):now_hour,\":\",now_min<10?\"0\".concat(now_min):now_min,\":\",now_second<10?\"0\".concat(now_second):now_second]}),content]});}export default AlarmHead;","map":{"version":3,"names":["React","useState","useInterval","AlarmHead","props","date","Date","hour","getHours","minute","getMinutes","second","getSeconds","day","getDate","month","getMonth","year","getFullYear","now_hour","setHour","now_min","setMinute","now_second","setSecond","now_day","setDay","now_month","setMonth","now_year","setYear","ringHour","undefined","Number","ringMin","ringMemo","ringId","ringOver","chkTimeHour","chkTimeMin","content","match","fetch","method","headers","body","JSON","stringify","over","then","res","ok","window","alert","catch"],"sources":["D:/PROJECTS/react-app/src/pages/AlarmHead.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport useInterval from '../hooks/useInterval.js';\r\n\r\nfunction AlarmHead(props) {\r\n\r\n    const date = new Date();\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let second = date.getSeconds();\r\n    let day = date.getDate();\r\n    let month = date.getMonth();\r\n    let year = date.getFullYear();\r\n\r\n    const [now_hour, setHour] = useState(hour);\r\n    const [now_min, setMinute] = useState(minute);\r\n    const [now_second, setSecond] = useState(second);\r\n    const [now_day, setDay] = useState(day);\r\n    const [now_month, setMonth] = useState(month + 1);\r\n    const [now_year, setYear] = useState(year);\r\n\r\n    const ringHour = props.ringHour === undefined ? props.ringHour : Number(props.ringHour);\r\n    const ringMin = props.ringMin === undefined ? props.ringMin : Number(props.ringMin);\r\n    const ringMemo = props.ringMemo;\r\n    const ringId = props.ringId;\r\n    const ringOver = props.ringOver;\r\n\r\n\r\n    let chkTimeHour = null;\r\n    let chkTimeMin = null;\r\n\r\n    let content = null;\r\n\r\n    //타임 체크\r\n    if (ringHour === undefined && ringMin === undefined) {\r\n        content = <h3 className=\"empty kr\">울릴 알람이 없습니다! 알람을 설정해 주세요.</h3>;\r\n    }\r\n    else if (now_min > ringMin) {\r\n        // chkTimeHour = now_hour === 0 ? ringHour - (now_hour + 1) : ringHour - now_hour;\r\n        chkTimeHour = ringHour - (now_hour + 1);\r\n        chkTimeMin = 60 + ringMin - now_min;\r\n        content = <h3 className='kr'><strong>{chkTimeHour}</strong>시간 <strong>{chkTimeMin}</strong>분 후에 <strong>{ringMemo}</strong> 알람이 실행됩니다.</h3>;\r\n    } else if (now_min < ringMin) {\r\n        chkTimeHour = ringHour - now_hour;\r\n        chkTimeMin = ringMin - now_min;\r\n        content = <h3 className='kr'><strong>{chkTimeHour}</strong>시간 <strong>{chkTimeMin}</strong>분 후에 <strong>{ringMemo}</strong> 알람이 실행됩니다.</h3>;\r\n    } else if (ringHour > now_hour && now_min === ringMin) {\r\n        chkTimeHour = ringHour - now_hour;\r\n        chkTimeMin = 0;\r\n        content = <h3 className='kr'><strong>{chkTimeHour}</strong>시간 <strong>{chkTimeMin}</strong>분 후에 <strong>{ringMemo}</strong> 알람이 실행됩니다.</h3>;\r\n    } else if (ringOver === false && ringHour === now_hour && ringMin === now_min && now_second === 0) {\r\n        match();\r\n    } else {\r\n        content = <h3 className=\"empty kr\">울릴 알람이 없습니다! 알람을 설정해 주세요.</h3>;\r\n    }\r\n    // setSwc(props.ringOver);\r\n\r\n    // } else if ((Number(ringHour) - now_hour) <= 1) { //설정한 시간과 현재시간이 같으면\r\n    //     chkTimeHour = 0;\r\n    //     chkTimeMin = Number(ringMin) - now_min;\r\n    //     content = `다음 알람 : ${chkTimeHour}시간 ${chkTimeMin}분 후에 ${ringMemo}알람이 실행됩니다.`;\r\n    // } else if ((Number(ringHour) - now_hour >= 1)) {\r\n    //     chkTimeHour = Number(ringHour) - now_hour;\r\n    //     // chkTimeMin = Number(ringMin) > now_min ? Number(ringMin) - now_min : now_min - Number(ringMin);\r\n    //     chkTimeMin = Number(ringMin) > now_min ? Number(ringMin) - now_min : 60 - now_min - Number(ringMin);\r\n\r\n    //     content = `다음 알람 : ${chkTimeHour}시간 ${chkTimeMin}분 후에 ${ringMemo}알람이 실행됩니다.`;\r\n\r\n    function match() {\r\n        fetch(`http://localhost:3001/alarm/${ringId}`, {\r\n            method: \"PATCH\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                over: true\r\n            }),\r\n        }).then(res => { if (res.ok) { window.alert(\"알람 발생!\") } })\r\n            // .then((res) => { if (res.ok) { console.log(\"알람 발생! 모달로 대체? useEffect로 화면밖에서도?\"); } })\r\n            .catch(() => { window.alert(\"네트워크 오류가 발생했습니다. 확인 후 다시 시도해주십시오.\"); })\r\n\r\n        // fetch(`http://localhost:3001/alarm?hour=${ringHour}&min=${ringMin}`, {\r\n        //     method: \"PUT\",\r\n        // }).then((res) => { console.log(\"알람\", res, ringMemo); })\r\n    }\r\n\r\n\r\n    useInterval(() => {\r\n        const date = new Date();\r\n        let hour = date.getHours();\r\n        let minute = date.getMinutes();\r\n        let second = date.getSeconds();\r\n        let day = date.getDate();\r\n        let month = date.getMonth();\r\n        let year = date.getFullYear();\r\n\r\n        setHour(hour);\r\n        setMinute(minute);\r\n        setSecond(second);\r\n        setDay(day);\r\n        setMonth(month + 1);\r\n        setYear(year);\r\n\r\n    }, 1000);\r\n\r\n    return (\r\n        <section id=\"alarmHead\">\r\n            <h1>ALARM</h1>\r\n            <h2 className='kr'>{now_year}. {now_month}. {now_day} {now_hour < 10 ? `0${now_hour}` : now_hour}:{now_min < 10 ? `0${now_min}` : now_min}:{now_second < 10 ? `0${now_second}` : now_second}</h2>\r\n            {content}\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default AlarmHead"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}